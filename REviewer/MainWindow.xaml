<Window x:Class="REviewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:REviewer"
        mc:Ignorable="d"
        Title="REviewer"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Width="700" Height="700"
        Background="#1E1E1E"
        Icon="/Resources/Icons/reviewer_icon_v2.png"
        WindowStyle="None"
        AllowsTransparency="True"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        FontFamily="Segoe UI">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles/DarkTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <!-- Main Layout: Activity Bar | Content | -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/> <!-- Title Bar -->
            <RowDefinition Height="*"/> <!-- Content -->
            <RowDefinition Height="Auto"/> <!-- Footer -->
            <RowDefinition Height="24"/> <!-- Status Bar -->
        </Grid.RowDefinitions>

        <!-- ================================================== -->
        <!-- Activity Bar (Left Sidebar)                        -->
        <!-- ================================================== -->
        <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="4" Background="{StaticResource Brush.Background.SideBar}">
            <StackPanel VerticalAlignment="Top">
                <!-- Game Library -->
                <Button x:Name="btnHome" Style="{StaticResource ActivityBarButton}" 
                        Tag="Active" Click="NavHome_Click" ToolTip="Game Library">
                    <Path Data="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" 
                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Width="24" Height="24" Stretch="Uniform"/>
                </Button>
                
                <!-- About -->
                <Button x:Name="btnAbout" Style="{StaticResource ActivityBarButton}" 
                        Click="NavAbout_Click" ToolTip="About">
                    <Path Data="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" 
                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Width="24" Height="24" Stretch="Uniform"/>
                </Button>
                
                <!-- Debug Logs -->
                <Button x:Name="btnDebug" Style="{StaticResource ActivityBarButton}" 
                        Click="NavDebug_Click" ToolTip="Debug Logs">
                    <Path Data="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A2.5,2.5 0 0,0 5,15.5A2.5,2.5 0 0,0 7.5,18A2.5,2.5 0 0,0 10,15.5A2.5,2.5 0 0,0 7.5,13M16.5,13A2.5,2.5 0 0,0 14,15.5A2.5,2.5 0 0,0 16.5,18A2.5,2.5 0 0,0 19,15.5A2.5,2.5 0 0,0 16.5,13Z" 
                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Width="24" Height="24" Stretch="Uniform"/>
                </Button>

                <!-- Race -->
                <Button x:Name="btnRace" Style="{StaticResource ActivityBarButton}" 
                        Click="NavRace_Click" ToolTip="Race Mode">
                    <Path Data="M13.49,5.42C13.41,5.07 13.07,4.82 12.71,4.9L10.3,5.44C9.73,5.57 9.32,6.05 9.32,6.64V9.17L7.64,10.85C7.25,11.24 7.25,11.88 7.64,12.27L8.29,12.92C8.68,13.31 9.32,13.31 9.71,12.92L11.39,11.24H14.15L15.83,12.92C16.22,13.31 16.86,13.31 17.25,12.92L17.9,12.27C18.29,11.88 18.29,11.24 17.9,10.85L16.22,9.17V6.64C16.22,6.05 15.81,5.57 15.24,5.44L12.83,4.9L13.49,5.42M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2" 
                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Width="24" Height="24" Stretch="Uniform"/>
                </Button>
                
                <!-- Settings -->
                <Button x:Name="btnSettings" Style="{StaticResource ActivityBarButton}" 
                        Click="NavSettings_Click" ToolTip="Settings">
                    <Path Data="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" 
                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Width="24" Height="24" Stretch="Uniform"/>
                </Button>
            </StackPanel>
        </Border>

        <!-- ================================================== -->
        <!-- Main Content Area                                  -->
        <!-- ================================================== -->
        <!-- Title Bar (Custom) -->
        <Border Grid.Column="1" Grid.Row="0" Background="{StaticResource Brush.Background.Dark}" 
                BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="0,0,0,1"
                MouseDown="Window_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Icon/Title -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="REviewer" Style="{StaticResource WindowHeaderTitle}"/>
                </StackPanel>

                <!-- Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Style="{StaticResource DockButton}" Click="MinimizeButton_Click">
                        <Path Data="M0,8 L8,8" Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" StrokeThickness="1" Width="10" Height="10"/>
                    </Button>
                    <Button Style="{StaticResource DockButton}" Click="CloseButton_Click">
                        <Path Data="M0,0 L8,8 M8,0 L0,8" Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" StrokeThickness="1.5" Width="10" Height="10"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" Grid.Row="1" Background="{StaticResource Brush.Background.Dark}">
            
            <!-- Home Panel -->
            <ScrollViewer x:Name="panelMain" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="24,20">
                    
                    <!-- Header -->
                    <TextBlock Text="REviewer" Style="{StaticResource PageTitle}"/>
                    <TextBlock Text="SRT &amp; Biorand Tool" Foreground="{StaticResource Brush.Text.Secondary}" 
                               FontSize="13" Margin="0,4,0,24"/>

                    <!-- Game Selection -->
                    <TextBlock Text="TARGET EXECUTABLE" Style="{StaticResource SectionHeader}"/>
                    <ComboBox Name="ComboBoxGameSelection" Style="{StaticResource FlatComboBox}" 
                              ItemContainerStyle="{StaticResource FlatComboBoxItem}"
                              SelectionChanged="ComboBoxGameSelection_SelectionChanged" Margin="0,0,0,24">
                        <ComboBoxItem Content="Resident Evil 1 - MediaKit" IsSelected="True"/>
                        <ComboBoxItem Content="Resident Evil 2 - SourceNext"/>
                        <ComboBoxItem Content="Resident Evil 2 - Claire (China)"/>
                        <ComboBoxItem Content="Resident Evil 2 - Leon (China)"/>
                        <ComboBoxItem Content="Resident Evil 3 - Rebirth"/>
                        <ComboBoxItem Content="Resident Evil 3 - CHN/TWN"/>
                        <ComboBoxItem Content="Resident Evil CVX - PS2 US"/>
                    </ComboBox>

                    <!-- Status Monitor (Terminal Look) -->
                    <TextBlock Text="STATUS MONITOR" Style="{StaticResource SectionHeader}"/>
                    <Border Background="{StaticResource Brush.Background.SideBar}" 
                            BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1" 
                            Padding="16,12" Margin="0,0,0,24">
                        <StackPanel>
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Process Name" Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Text.Secondary}"/>
                                <TextBlock x:Name="MD5Status" Grid.Column="1" Text="[ SEARCHING ]" 
                                           Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Status.Warning}" FontWeight="Bold"/>
                            </Grid>
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Process Hook" Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Text.Secondary}"/>
                                <TextBlock x:Name="ProcessStatus" Grid.Column="1" Text="[ WAITING ]" 
                                           Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Status.Warning}" FontWeight="Bold"/>
                            </Grid>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Save Data" Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Text.Secondary}"/>
                                <TextBlock x:Name="SaveStatus" Grid.Column="1" Text="[ LOADED ]" 
                                           Style="{StaticResource MonoStatus}" 
                                           Foreground="{StaticResource Brush.Status.Success}" FontWeight="Bold"/>
                            </Grid>
                        </StackPanel>
                    </Border>



                    <!-- Challenges -->
                    <TextBlock Text="CHALLENGES" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                        <ToggleButton x:Name="OneHPToggle" Style="{StaticResource ToggleChip}" 
                                      Content="1 HP Challenge" IsChecked="{Binding OneHPChallenge}" 
                                      Margin="0,0,8,0"/>
                        <ToggleButton x:Name="NoDamageToggle" Style="{StaticResource ToggleChip}" 
                                      Content="No Damage" IsChecked="{Binding NoDamageChallenge}" 
                                      Margin="0,0,8,0"/>
                        <ToggleButton x:Name="NoItemboxToggle" Style="{StaticResource ToggleChip}" 
                                      Content="No Itembox" IsChecked="{Binding NoItemBoxChallenge}"/>
                    </StackPanel>

                    <!-- Options -->
                    <TextBlock Text="OPTIONS" Style="{StaticResource SectionHeader}"/>
                    <WrapPanel Margin="0,0,0,24">
                        <ToggleButton x:Name="BiorandToggle" Style="{StaticResource ToggleChip}" 
                                      Content="Item Tracker" IsChecked="{Binding isBiorandMode}" 
                                      Margin="0,0,8,8"/>
                        <ToggleButton x:Name="HealthBarToggle" Style="{StaticResource ToggleChip}" 
                                      Content="Health Bar" IsChecked="{Binding isHealthBarChecked}" 
                                      Margin="0,0,8,8"/>
                        <ToggleButton x:Name="ItemBoxToggle" Style="{StaticResource ToggleChip}" 
                                      Content="Show ItemBox" IsChecked="{Binding isItemBoxChecked}" 
                                      Margin="0,0,8,8"/>
                        <ToggleButton x:Name="DebugToggle" Style="{StaticResource ToggleChip}" 
                                      Content="Debug Menu" IsChecked="{Binding DebugMode}" 
                                      Margin="0,0,8,8"/>
                    </WrapPanel>

                </StackPanel>
            </ScrollViewer>

            <!-- Settings Panel -->
            <ScrollViewer x:Name="panelSettings" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="24,20">
                    <TextBlock Text="Settings" Style="{StaticResource PageTitle}" Margin="0,0,0,24"/>
                    
                    <!-- AESTHETICS & THEMES -->
                    <TextBlock Text="AESTHETICS &amp; THEMES" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Margin="0,0,0,24">
                        <TextBlock Text="Window Background" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Text="{Binding CustomBackgroundPath, Mode=TwoWay}" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,8,0"/>
                            <Button Content="Browse..." Click="BrowseBackground_Click"
                                    Background="{StaticResource Brush.Background.Input}" 
                                    Foreground="{StaticResource Brush.Text.Primary}"
                                    BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                    Padding="16,8" Cursor="Hand" Grid.Column="1"/>
                        </Grid>
                        
                         <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                             <TextBox Text="{Binding CustomBackgroundColor, Mode=TwoWay}" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,8,0"
                                     ToolTip="Hex Color (e.g. #FF0000)"/>
                            <Button Content="Select Color" Click="PickColor_Click" 
                                    Background="{StaticResource Brush.Background.Input}" 
                                    Foreground="{StaticResource Brush.Text.Primary}"
                                    BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                    Padding="16,8" Cursor="Hand" Grid.Column="1" ToolTip="Color Picker"/>
                        </Grid>

                        <TextBlock Text="Background Opacity" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,4,0,4"/>
                        <Slider Value="{Binding CustomBackgroundOpacity, Mode=TwoWay}" Minimum="0" Maximum="1" LargeChange="0.1" SmallChange="0.01"/>
                    </StackPanel>

                    <TextBlock Text="OVERLAY APPEARANCE" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Margin="0,0,0,24">
                        <Grid Margin="0,0,0,4">
                            <TextBlock Text="Text Scale" Foreground="{StaticResource Brush.Text.Secondary}"/>
                            <TextBlock Text="{Binding OverlayScale, StringFormat=x{0:F2}}" Foreground="{StaticResource Brush.Text.Primary}" HorizontalAlignment="Right"/>
                        </Grid>
                        <Slider Value="{Binding OverlayScale, Mode=TwoWay}" 
                                Minimum="1" Maximum="3" 
                                TickFrequency="0.25" IsSnapToTickEnabled="True"/>
                    </StackPanel>

                    <TextBlock Text="TIMER APPEARANCE" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Margin="0,0,0,24">
                        <TextBlock Text="Timer Font Color" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                        <Grid>
                             <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                             <TextBox Text="{Binding TimerColor, Mode=TwoWay}" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,8,0"
                                     ToolTip="Hex Color"/>
                            <Button Content="Default" Click="ResetTimerColor_Click"
                                    Background="{StaticResource Brush.Background.Input}" 
                                    Foreground="{StaticResource Brush.Text.Primary}"
                                    BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                    Padding="16,8" Cursor="Hand" Grid.Column="1" Margin="0,0,8,0"/>
                             <Button Content="Select Color" Click="PickTimerColor_Click"
                                    Background="{StaticResource Brush.Background.Input}" 
                                    Foreground="{StaticResource Brush.Text.Primary}"
                                    BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                    Padding="16,8" Cursor="Hand" Grid.Column="2"/>
                        </Grid>
                    </StackPanel>

                    <!-- RE1 Save Path -->
                    <TextBlock Text="RESIDENT EVIL 1 - SAVE PATH" Style="{StaticResource SectionHeader}"/>
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Name="RE1SavePath" Background="{StaticResource Brush.Background.Input}"
                                 Foreground="{StaticResource Brush.Text.Primary}" 
                                 BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                 Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,8,0"/>
                        <Button Grid.Column="1" Content="Browse" Click="RE1SavePathButton_Click"
                                Background="{StaticResource Brush.Background.Input}" 
                                Foreground="{StaticResource Brush.Text.Primary}"
                                BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                Padding="16,8" Cursor="Hand"/>
                    </Grid>


                    <!-- Window Layout -->
                    <TextBlock Text="WINDOW LAYOUT" Style="{StaticResource SectionHeader}"/>
                    <WrapPanel>
                        <ToggleButton Style="{StaticResource ToggleChip}" Content="Minimalist UI" 
                                      IsChecked="{Binding isMinimalistChecked}" Margin="0,0,8,8"/>
                        <ToggleButton Style="{StaticResource ToggleChip}" Content="Fixed Enemy Tracker" 
                                      IsChecked="{Binding isStaticEnemyTrackerWindow}" Margin="0,0,8,8"/>
                        <ToggleButton Style="{StaticResource ToggleChip}" Content="Hide Statistics" 
                                      IsChecked="{Binding isNoStatsChecked}" Margin="0,0,8,8"/>
                        <ToggleButton Style="{StaticResource ToggleChip}" Content="Hide Segment Times" 
                                      IsChecked="{Binding isNoSegmentsTimerChecked}" Margin="0,0,8,8"/>
                    </WrapPanel>
                </StackPanel>
            </ScrollViewer>

            <!-- About Panel -->
            <ScrollViewer x:Name="panelAbout" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="24,20">
                    <TextBlock Text="About REviewer" Style="{StaticResource PageTitle}" Margin="0,0,0,24"/>
                    
                    <!-- Developer -->
                    <TextBlock Text="DEVELOPER" Style="{StaticResource SectionHeader}"/>
                    <WrapPanel Margin="0,0,0,24">
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Namsku" Foreground="{StaticResource Brush.Text.Primary}" 
                                       FontSize="13" FontWeight="SemiBold"/>
                        </Border>
                    </WrapPanel>
                    
                    <!-- Special Thanks -->
                    <TextBlock Text="SPECIAL THANKS" Style="{StaticResource SectionHeader}"/>
                    <WrapPanel Margin="0,0,0,24">
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="IntelOrca" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Kapdap!" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="SniperWolf" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Noxx" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Otamega72" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Albert_Fn_Wesker" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="DeathNoDamage" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Biorand Community" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                    </WrapPanel>
                    
                    <!-- Resources -->
                    <TextBlock Text="RESOURCES" Style="{StaticResource SectionHeader}"/>
                    <WrapPanel Margin="0,0,0,24">
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="HD Packs" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                        <Border Style="{StaticResource StatBadge}">
                            <TextBlock Text="Evil Resources" Foreground="{StaticResource Brush.Text.Primary}" FontSize="12"/>
                        </Border>
                    </WrapPanel>

                    <!-- Support Me -->
                    <TextBlock Text="SUPPORT THE PROJECT" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Margin="0,0,0,24">
                        <TextBlock Text="If you enjoy using REviewer and want to support its development, consider buying me a coffee! Your support helps keep the project alive and updated." 
                                   Foreground="{StaticResource Brush.Text.Secondary}" TextWrapping="Wrap" Margin="0,0,0,12" FontSize="13"/>
                        
                        <Button Click="SupportKoFi_Click" Cursor="Hand" HorizontalAlignment="Left" Background="Transparent" BorderThickness="0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="#FF5E5B" CornerRadius="8" Padding="16,10" BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <Path Data="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734c4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-1.235-3.652-3.635-3.652-3.635s1.314-1.838 3.041-1.637c1.08.125 1.512.654 1.512.654s.43-.545 1.49-1.027c.66-.3 3.32-.276 2.038 1.736zm5.895 2.589c-.611 1.705-2.002 2.378-3.921 2.383-1.025.002-1.396-.453-1.396-.453l.421-3.605s3.837-.899 4.896 1.675z"
                                                  Fill="White" Height="20" Stretch="Uniform" Margin="0,0,12,0"/>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="Support on Ko-fi" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                                <TextBlock Text="One-time donation" Foreground="#FFEEEE" FontSize="11"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="MouseOver">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0.9" Duration="0:0:0.1"/>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0.8" Duration="0:0:0"/>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Disabled">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0.5" Duration="0:0:0"/>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>

            <!-- Debug Logs Panel -->
            <ScrollViewer x:Name="panelDebug" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="24,20">
                    <TextBlock Text="Debug Logs" Style="{StaticResource PageTitle}" Margin="0,0,0,24"/>
                    
                    <Border Background="{StaticResource Brush.Background.SideBar}" 
                            BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1" 
                            Padding="16,12">
                        <ScrollViewer MaxHeight="400" VerticalScrollBarVisibility="Auto">
                            <TextBlock x:Name="LogOutput" FontFamily="Cascadia Code, Consolas" FontSize="11"
                                       Foreground="{StaticResource Brush.Text.Primary}" TextWrapping="Wrap"
                                       Text="Loading logs..."/>
                        </ScrollViewer>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Race Panel -->
            <ScrollViewer x:Name="panelRace" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <!-- Content (Disabled) -->
                    <StackPanel Margin="24,20" IsEnabled="False" Opacity="0.5">
                        <TextBlock Text="Race Mode" Style="{StaticResource PageTitle}" Margin="0,0,0,24"/>
                        
                        <TextBlock Text="SERVER CONFIGURATION" Style="{StaticResource SectionHeader}"/>
                        <StackPanel Margin="0,0,0,24">
                            <TextBlock Text="Server URL" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                            <TextBox x:Name="RaceServerUrl" Text="127.0.0.1" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="Port (UDP)" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                            <TextBox x:Name="RaceServerPort" Text="5006" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,0,12"/>

                            <!-- Connection Status -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                 <TextBlock Text="Status: " Foreground="{StaticResource Brush.Text.Secondary}"/>
                                 <TextBlock x:Name="RaceConnectionStatus" Text="Disconnected" Foreground="Red" FontWeight="Bold"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="ROOM CONFIGURATION" Style="{StaticResource SectionHeader}"/>
                        <StackPanel Margin="0,0,0,24">
                            <TextBlock Text="Room ID" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                            <TextBox x:Name="RaceRoomId" Text="default" 
                                     Background="{StaticResource Brush.Background.Input}"
                                     Foreground="{StaticResource Brush.Text.Primary}" 
                                     BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                     Padding="10,8" FontFamily="Consolas" FontSize="12" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="Password" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                            <PasswordBox x:Name="RacePassword" PasswordChar="*" 
                                         Background="{StaticResource Brush.Background.Input}"
                                         Foreground="{StaticResource Brush.Text.Primary}" 
                                         BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="1"
                                         Padding="10,8" Margin="0,0,0,12"/>

                            <TextBlock Text="Runner Color" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,0,0,4"/>
                            <ComboBox x:Name="RaceRunnerColor" Style="{StaticResource FlatComboBox}" 
                                      ItemContainerStyle="{StaticResource FlatComboBoxItem}" Margin="0,0,0,12">
                                <ComboBoxItem Content="Blue (Runner A)" IsSelected="True"/>
                                <ComboBoxItem Content="Red (Runner B)"/>
                            </ComboBox>
                        </StackPanel>

                        <Grid Margin="0,12,0,12">
                            <Button x:Name="btnConnectRace" Content="CONNECT TO RACE" Style="{StaticResource PrimaryButton}" 
                                    Click="ConnectRace_Click" Height="40" Visibility="Visible"/>
                            <Button x:Name="btnDisconnectRace" Content="DISCONNECT" Click="DisconnectRace_Click" 
                                    Height="40" Visibility="Collapsed"
                                    Background="#B00020" Foreground="White" BorderThickness="0">
                                 <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}" CornerRadius="4">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#D32F2F"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <TextBlock Text="RACE LOG" Style="{StaticResource SectionHeader}"/>
                        <ListBox x:Name="RaceLogBox" Height="150" Background="{StaticResource Brush.Background.Input}" 
                                 Foreground="{StaticResource Brush.Text.Primary}" BorderBrush="{StaticResource Brush.Border.Subtle}"
                                 BorderThickness="1" FontFamily="Consolas" FontSize="11" />
                    </StackPanel>
                    
                    <!-- Overlay -->
                    <Border Background="#CC000000" IsHitTestVisible="True">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Path Data="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A6,6 0 0,1 12,2A6,6 0 0,1 6,8V10H4A2,2 0 0,0 2,12V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V12A2,2 0 0,0 20,10H18V8M16,8V10H8V8A4,4 0 0,1 12,4A4,4 0 0,1 16,8Z"
                                  Fill="{StaticResource Brush.Status.Warning}" Width="48" Height="48" Stretch="Uniform" Margin="0,0,0,16"/>
                            <TextBlock Text="WORK IN PROGRESS" Foreground="{StaticResource Brush.Status.Warning}" 
                                       FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                             <TextBlock Text="This feature is currently under active development." 
                                       Foreground="{StaticResource Brush.Text.Secondary}" 
                                       FontSize="14" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </ScrollViewer>
        </Grid>

        <!-- Footer (Run Action) -->
        <Border Grid.Column="1" Grid.Row="2" Background="{StaticResource Brush.Background.Dark}" 
                BorderBrush="{StaticResource Brush.Border.Subtle}" BorderThickness="0,1,0,0"
                Padding="24,16">
            <Button x:Name="Run" Content="RUN SRT" Style="{StaticResource PrimaryButton}" 
                    Click="Run_Click" HorizontalAlignment="Stretch" Height="40"/>
        </Border>

        <!-- ================================================== -->
        <!-- Status Bar (Bottom)                                -->
        <!-- ================================================== -->
        <!-- Status Bar (Bottom) -->
        <Border Grid.Column="1" Grid.Row="3" 
                Background="{StaticResource Brush.StatusBar}">
            <Grid Margin="12,0">
                <TextBlock Text="Ready" Foreground="White" FontSize="11" VerticalAlignment="Center"
                           FontFamily="Segoe UI"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <TextBlock x:Name="StatusMD5" Text="MD5: Pending" Foreground="White" FontSize="11" 
                               FontFamily="Cascadia Code, Consolas" Margin="0,0,16,0"/>
                    <TextBlock x:Name="StatusProcess" Text="Process: Waiting" Foreground="White" FontSize="11" 
                               FontFamily="Cascadia Code, Consolas"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ================================================== -->
        <!-- Hidden Compatibility Elements (for code-behind)   -->
        <!-- ================================================== -->
        <StackPanel Visibility="Collapsed">
            <!-- Status TextBlocks -->
            <TextBlock x:Name="MD5"/>
            <TextBlock x:Name="ProcessTextBlock"/>
            <TextBlock x:Name="Save"/>
            <TextBlock x:Name="versionLabel"/>
            <Border x:Name="versionBox"/>
            
            <!-- Hidden Save Path TextBoxes -->
            <TextBox x:Name="RE2SavePath"/>
            <TextBox x:Name="RE3SavePath"/>
            
            <!-- CheckBox elements referenced by code-behind -->
            <CheckBox x:Name="HealthBar" IsChecked="{Binding isHealthBarChecked}"/>
            <CheckBox x:Name="BiorandMode" IsChecked="{Binding isBiorandMode}"/>
            <CheckBox x:Name="ShowItemBox" IsChecked="{Binding isItemBoxChecked}"/>
            <CheckBox x:Name="ChrisInventory" IsChecked="{Binding isChrisInventoryChecked}"/>
            <CheckBox x:Name="Sherry" IsChecked="{Binding isSherryChecked}"/>
            <CheckBox x:Name="NoSegTimes" IsChecked="{Binding isNoSegmentsTimerChecked}"/>
            <CheckBox x:Name="NoStats" IsChecked="{Binding isNoStatsChecked}"/>
            <CheckBox x:Name="NoKeyItems" IsChecked="{Binding isNoKeyItemsChecked}"/>
            <CheckBox x:Name="Minimalist" IsChecked="{Binding isMinimalistChecked}"/>
            <CheckBox x:Name="OneHP" IsChecked="{Binding OneHPChallenge}"/>
            <CheckBox x:Name="NoDamage" IsChecked="{Binding NoDamageChallenge}"/>
            <CheckBox x:Name="NoItemBox" IsChecked="{Binding NoItemBoxChallenge}"/>
            <CheckBox x:Name="DebugMode" IsChecked="{Binding DebugMode}"/>
            <CheckBox x:Name="StaticEnemyTrackerWindow" IsChecked="{Binding isStaticEnemyTrackerWindow}"/>
            <CheckBox x:Name="DdrawBio3" IsChecked="{Binding isDdrawChecked}"/>
            
            <!-- Overlay Position ComboBox -->
            <ComboBox x:Name="OverlayPosition">
                <ComboBoxItem Content="Bottom-Right" IsSelected="True"/>  <!-- Index 0 -->
                <ComboBoxItem Content="Top-Right"/>                        <!-- Index 1 -->
                <ComboBoxItem Content="Top-Left"/>                         <!-- Index 2 -->
                <ComboBoxItem Content="Bottom-Left"/>                      <!-- Index 3 -->
            </ComboBox>
        </StackPanel>
    </Grid>
</Window>

